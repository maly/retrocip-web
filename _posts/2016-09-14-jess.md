---
id: 887
title: Jess
date: 2016-09-14T12:12:32+01:00
author: Martin Maly
layout: post
guid: http://retrocip.uelectronics.info/?p=887
permalink: /jess/
xyz_lnap:
  - "1"
dsq_thread_id:
  - "5144582074"
categories:
  - Hardware
tags:
  - "6809"
  - Altera
  - FPGA
---
Zp치tky ke ko콏en콢m! V캜era v noci jsem se kone캜n캩 dokopal k tomu, abych dod캩lal desku plo코n칳ch spoj콢 pro sv콢j [nov칳 star칳 po캜칤ta캜](http://retrocip.uelectronics.info/novy-stary-pocitac/). K칩dov칠 ozna캜en칤 Jess.

Hlavn캩 teda p콏i코ly pam캩ti SRAM, co pracuj칤 na 3.3V. T캩ch p캩tivoltov칳ch m치m, 쬰 bych jimi mohl vydl치쬯it podlahu v koupeln캩, ale centrem toho v코eho je FPGA, a ta jede na 3.3V, nazdar bazar 칠ljen!

J치 bych to klidn캩 implementoval cel칠 ve FPGA, ale [ten m콢j kousek (EP2C5)](http://fpga.cz/ep2c5t144/) nem치 dost RAMky na n캩jak칠 v캩t코칤 prostocviky, tak jsem zvolil extern칤. Nakonec to bude AS6C1008 nebo AS6C4008 &#8211; plo코켿치k je p콏ipraven칳 na oboj칤. Jako vstup m치m kl치vesnici na PS/2, v칳stup je VGA s 코esti bitama (tedy 64 barevn칳ch odst칤n콢). K tomu tam je jedna s칠riov치 FLASH na SPI (SMD nebo DIL) a jeden slot na dal코칤 FLASH (SD karta ne, ta p콏ijde pozd캩ji). No a sestavu periferi칤 uzav칤raj칤 dva s칠riov칠 porty.

Displej bude nejprve textov칳 se semigrafikou, to nacpu do intern칤ch pam캩콘ov칳ch blok콢. Ve verzi 2 budu cht칤t vyzkou코et pou쬴t칤 t칠 extern칤 pam캩ti. Budu 콏e코it to, co 콏e코ili v코ichni v 80. letech, toti jak to za콏칤dit, aby do pam캩ti lezl procesor i videoobvod a nepoml치tili se. N캩kte콏칤 to 콏e코ili tak, 쬰 procesor zastavovali nebo zpomalovali, jin칤 na to m캩li speci치ln칤 hardware a vyhra쬰nou pam캩콘, no a p치r 코칤lenc콢 pou쬴lo metodu &#8222;sud치 &#8211; lich치&#8220;, tedy 쬰 se procesor a video v p콏칤stupech st콏칤dali. Procesor lezl v lich칳ch p콢ltaktech, video v sud칳ch atd. Zkusmo jsem to po캜칤tal, a m치m hrani캜n칤 frekvenci n캩kde okolo 10 MHz. To u by mohlo j칤t &#8211; minim치ln캩 t캩ch 256&#215;192 d치m ur캜it캩 游땔 Ale uvid칤me, a jak 콏칤k치m: f치ze 2!

K t칠 kl치vesnici: herdek, fakt nen칤 mo쬹칠 sehnat dobrou maticovou kl치vesnici s tla캜칤tkama! Bu캞 si ud캩lat membr치novou, nebo si ji poskl치dat z mechanick칳ch tla캜칤tek, a up콏칤mn캩 &#8211; tak 캜i onak to znamen치 leptat pom캩rn캩 velk칳 kus PCB a spoustu piplav칠 pr치ce. Mo쬹치 to n캩kdy v budoucnu ud캩l치m, mo쬹치 s치hnu k tomu, 쬰 vezmu t콏eba n치hradn칤 kl치vesnici z C64, kter칳ch je v코ude dost. Uvid칤me. Verze 1 je zat칤m PS/2.

Uvnit콏 toho v코eho bude&#8230; chv칤le nap캩t칤&#8230; ano, bude tam nejsp칤코 [6809](http://retrocip.uelectronics.info/posledni-krasavec-osmibitove-ery/) jako soft core. Ve FPGA dostane k ruce zhruba p콢lkilo bootloaderu v pam캩ti. Ten bude m칤t jedinou starost &#8211; toti vz칤t obsah ze s칠riov칠 flash (AT25Ln캩co) a nat치hnout ji do RAMky. Pak odpoj칤 intern칤 pam캩콘, a jede se!

Proto쬰 je RAMky v칤c ne dost, ud캩l치m ji nejprve tak, 쬰 bude mo쬹ost mapovat str치nky do adresn칤ho prostoru. Ve verzi 2, mo쬹치 3, bych r치d ud캩lal takov칳 hack, toti plnou MMU s p콏ekl치d치n칤m adres, s mo쬹ost칤 ochrany pam캩ti a s takov칳m jednoduch칳m p콏ep칤n치n칤m privilegovan칠ho a u쬴vatelsk칠ho m칩du &#8211; to sice procesor neum칤, ale extern캩 to p콢jde &#8222;dobastlit&#8220;.

A jako software asi p콏ijde nejd콏칤v jednoduch칳 monitor, a pak se uvid칤. Nechci za캜칤nat s ambici칩zn칤m pl치nem na portaci OS9 nebo n캩캜eho podobn칠ho&#8230;